# This file is part of the Sylius package.
# (c) Paweł Jędrzejewski

imports:
    - { resource: "@SyliusCoreBundle/Resources/config/app/config.yml" }
    - { resource: "sylius/core/app/config.yml" }
    - { resource: "sylius/admin/app/config.yml" }
    - { resource: "@SyliusShopBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusAdminApiBundle/Resources/config/app/config.yml" }
    - { resource: "@DosPaysbuyBundle/Resources/config/app/main.yml" }
    - { resource: "@VcareWebBundle/Resources/config/app.yml" }
    - { resource: "@ToroMediaBundle/Resources/config/app.yml" }
    - { resource: "@ToroCmsBundle/Resources/config/app/main.yml" }
    - { resource: "vcare/config.yml" }

    - { resource: "parameters.yml" }
    - { resource: "security.yml" }

framework:
    translator: { fallbacks: ["%locale%", "en"] }
    secret: "%secret%"
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: "%kernel.debug%"
    form: true
    csrf_protection: true
    validation: { enable_annotations: true }
    templating: { engines: ["twig"] }
    default_locale: "%locale%"
    session:
        handler_id: ~

doctrine:
    dbal:
        driver: "%database_driver%"
        host: "%database_host%"
        port: "%database_port%"
        dbname: "%database_name%"
        user: "%database_user%"
        password: "%database_password%"
        server_version: "%server_version%"
        charset: utf8
        default_table_options:
            charset: utf8
            collate: utf8_unicode_ci
    orm:
        naming_strategy: doctrine.orm.naming_strategy.underscore

doctrine_migrations:
    dir_name: "%kernel.root_dir%/migrations"
    namespace: Sylius\Migrations
    table_name: sylius_migrations
    name: Sylius Migrations

swiftmailer:
    transport: "%mailer_transport%"
    host: "%mailer_host%"
    username: "%mailer_user%"
    password: "%mailer_password%"

fos_rest:
    exception: ~
    view:
        formats:
            json: true
            xml:  true
        empty_content: 204
    format_listener:
        rules:
            - { path: '^/api', priorities: ['json', 'xml'], fallback_format: json, prefer_extension: true }
            - { path: '^/', stop: true }

twig:
    globals:
        cart_context: "@sylius.context.cart"
        channel_settings: "@vcare.context.channel_settings"
        product_repository: "@sylius.repository.product"
        cx_channel: "@sylius.context.channel"
        cx_settings: "@vcare.context.channel_settings"
        site_url: "%toro_base_url%"
        branding: "%toro_branding%"

hwi_oauth:
    firewall_names: [shop]
    resource_owners:
        facebook:
            type: facebook
            client_id: "%toro_facebook_client_id%"
            client_secret: "%toro_facebook_client_secret%"
            scope: "email,public_profile,user_birthday"
