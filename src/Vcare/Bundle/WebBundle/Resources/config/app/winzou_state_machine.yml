winzou_state_machine:
    sylius_order:
        callbacks:
            after:
                vcare_cancel_order:
                    on: ["cancel"]
                    do: ["@vcare.email_manager.order", "sendCancelledEmail"]
                    args: ["object"]
    sylius_payment:
        callbacks:
            after:
                vcare_payment_processing:
                    on: ["process"]
                    do: ["@sylius.email_manager.order", "sendConfirmationEmail"]
                    args: ["object.getOrder()"]

    sylius_order_checkout:
        callbacks:
            after:
                sylius_assign_token:
                    priority: -1

    sylius_order_payment:
        callbacks:
            after:
                vcare_paid_order:
                    on: ["pay"]
                    do: ["@sylius.email_manager.order", "sendConfirmationEmail"]
                    args: ["object"]
