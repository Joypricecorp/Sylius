<table class="table table-striped table-bordered">
    <thead>
    <tr>
        <th>#</th>
        <th>{{ 'sylius.ui.item'|trans }}</th>
        <th class="text-align-right">{{ 'sylius.ui.price'|trans }}</span></th>
        <th class="text-align-center">{{ 'sylius.ui.qty'|trans }}</th>
        <th class="text-align-right">{{ 'sylius.ui.subtotal'|trans }}</th>
    </tr>
    </thead>
    <tbody>
        {% for item in order.items %}
            {% set product = item.product %}
            <tr>
                <td>{{ loop.index }}.</td>
                <td>{{ include('VcareWebBundle:Product:_variant.html.twig', {'variant': item.variant}) }}</td>
                <td class="text-align-right">
                    {{ item.unitPrice|sylius_price(order.currencyCode, order.exchangeRate) }}
                </td>
                <td class="text-align-center">{{ item.quantity }}</td>
                <td class="text-align-right">
                    {{ item.subtotal|sylius_price(order.currencyCode, order.exchangeRate) }}
                </td>
            </tr>
        {% endfor %}
    </tbody>
    <tfoot>
    <tr>
        <th class="text-align-right" colspan="4">{{ 'sylius.ui.subtotal'|trans }}</th>
        <td class="text-align-right">{{ order.itemsTotal|sylius_price(order.currencyCode, order.exchangeRate) }}</td>
    </tr>
    <tr>
        <th class="text-align-right" colspan="4">{{ 'sylius.ui.tax_total'|trans }}</th>
        <td class="text-align-right">{{ order.taxTotal|sylius_price(order.currencyCode, order.exchangeRate) }}</td>
    </tr>
    <tr>
        <th class="text-align-right" colspan="4">{{ 'sylius.ui.shipping_total'|trans }}</th>
        <td class="text-align-right">{{ order.shippingTotal|sylius_price(order.currencyCode, order.exchangeRate) }}</td>
    </tr>

    {% set orderPromotionAdjustment = constant('Sylius\\Component\\Core\\Model\\AdjustmentInterface::ORDER_PROMOTION_ADJUSTMENT') %}
    {% set orderPromotions = sylius_aggregate_adjustments(order.getAdjustmentsRecursively(orderPromotionAdjustment)) %}

    {% if not orderPromotions is empty %}
        <tr>
            <th class="text-align-right" colspan="4">
                <strong>{{ 'sylius.ui.promotion_total'|trans }}</strong><br>
                <ul>
                    {% for label, amount in orderPromotions %}
                        <li class="item">
                            {{ label }} {% if not amount == 0 %}-{% endif %}{{ (-1 * amount)|sylius_price(order.currencyCode, order.exchangeRate) }}
                        </li>
                    {% endfor %}
                </ul>
            </th>

            {% set orderDiscount = order.adjustmentsTotalRecursively(orderPromotionAdjustment) %}

            <td class="text-align-right">
                {% if not orderDiscount == 0 %}-{% endif %}{{ (-1 * orderDiscount)|sylius_price(order.currencyCode, order.exchangeRate) }}
            </td>
        </tr>
    {% endif %}

    <tr class="grand-total">
        <th class="text-align-right" colspan="4">{{ 'sylius.ui.total'|trans }}</th>
        <td class="text-align-right">{{ order.total|sylius_price(order.currencyCode, order.exchangeRate) }}</td>
    </tr>
    </tfoot>
</table>
